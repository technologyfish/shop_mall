import{_ as b,a as g,r as p,o as y,q as h,b as k,d as C,e as x,f as a,i as c,w as A,C as i,D as u,t as I,A as w,K as d,k as P,W as S}from"./index-dc0220d7.js";const U={class:"profile-content-page"},V={class:"mobile-avatar-section"},D=["src"],M={class:"avatar-overlay"},B={class:"form-grid"},F={class:"form-group"},N={class:"form-group"},E={class:"form-group"},Y={class:"form-group"},q=["disabled"],K="https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",T={__name:"Profile",setup(W){const o=g(),l=p({username:"",nickname:"",email:"",phone:"",avatar:""}),n=p(!1),v=p(null);y(()=>{o.userInfo&&(l.value={...o.userInfo})}),h(()=>o.userInfo,t=>{t&&(l.value={...t})},{immediate:!0});const f=async()=>{n.value=!0;try{await o.updateProfile(l.value),d.success("Profile updated successfully")}catch(t){d.error(t.message||"Failed to update profile")}finally{n.value=!1}},m=()=>{var t;(t=v.value)==null||t.click()},_=async t=>{const e=t.target.files[0];if(!e)return;const r=new FormData;r.append("file",e);try{await o.updateAvatar(r),d.success("Avatar updated successfully"),o.userInfo&&(l.value.avatar=o.userInfo.avatar)}catch(s){console.error(s),d.error("Failed to upload avatar")}};return(t,e)=>{const r=k("el-icon");return C(),x("div",U,[a("div",V,[a("div",{class:"avatar-upload",onClick:m},[a("img",{src:l.value.avatar||K,alt:"Avatar",class:"avatar-image"},null,8,D),a("div",M,[c(r,null,{default:A(()=>[c(P(S))]),_:1}),e[4]||(e[4]=a("span",null,"Change Avatar",-1))])]),a("input",{type:"file",ref_key:"avatarInputMobile",ref:v,accept:"image/*",style:{display:"none"},onChange:_},null,544)]),a("form",{onSubmit:w(f,["prevent"])},[a("div",B,[a("div",F,[e[5]||(e[5]=a("label",null,"Username",-1)),i(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.username=s),type:"text",disabled:"",class:"disabled"},null,512),[[u,l.value.username]])]),a("div",N,[e[6]||(e[6]=a("label",null,"Nickname",-1)),i(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.nickname=s),type:"text",placeholder:"Your display name"},null,512),[[u,l.value.nickname]])]),a("div",E,[e[7]||(e[7]=a("label",null,"Email",-1)),i(a("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.email=s),type:"email",disabled:"",class:"disabled"},null,512),[[u,l.value.email]])]),a("div",Y,[e[8]||(e[8]=a("label",null,"Phone",-1)),i(a("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.phone=s),type:"tel",placeholder:"Your phone number"},null,512),[[u,l.value.phone]])])]),a("button",{type:"submit",class:"btn-submit",disabled:n.value},I(n.value?"Saving...":"Save Changes"),9,q)],32)])}}},z=b(T,[["__scopeId","data-v-a307e9d9"]]);export{z as default};
