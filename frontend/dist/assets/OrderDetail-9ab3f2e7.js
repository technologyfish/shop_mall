import{_ as C,I as M,u as N,r as z,o as I,ak as T,Q as q,b as _,d,e as y,f as r,i as l,w as t,k as S,V as E,j as n,t as s,l as c,G as F,h as p}from"./index-dc0220d7.js";const P={class:"admin-order-detail-page"},R={class:"page-header"},j={key:0,class:"content"},A={class:"card"},G={style:{color:"#e74c3c"}},H={style:{color:"#e74c3c","font-size":"18px","font-weight":"bold"}},Q={class:"card"},W={class:"product-cell"},Y=["src","alt"],J={class:"product-name"},K={class:"card"},L={key:1,class:"loading"},U={__name:"OrderDetail",setup(X){const w=M(),k=N(),e=z(null);I(()=>{x()});const x=async()=>{try{const i=await T(w.params.id);e.value=i.data.data}catch{q.error("获取订单详情失败"),k.back()}},g=i=>{if(!i)return"";const a=new Date(i),m=a.getFullYear(),h=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),b=String(a.getHours()).padStart(2,"0"),v=String(a.getMinutes()).padStart(2,"0"),f=String(a.getSeconds()).padStart(2,"0");return`${m}-${h}-${o} ${b}:${v}:${f}`},$=i=>({0:"warning",1:"primary",3:"success",4:"info"})[i]||"info",D=i=>({0:"待支付",1:"待发货",3:"已完成",4:"已取消"})[i]||"未知",O=i=>{var m;const a=((m=i.product)==null?void 0:m.image)||i.product_image;return a?a.startsWith("http")?a:`https://www.aizhong168.cn${a}`:"https://via.placeholder.com/80"};return(i,a)=>{const m=_("el-icon"),h=_("el-button"),o=_("el-descriptions-item"),b=_("el-tag"),v=_("el-descriptions"),f=_("el-table-column"),V=_("el-table"),B=_("el-skeleton");return d(),y("div",P,[r("div",R,[l(h,{link:"",onClick:a[0]||(a[0]=u=>S(k).back())},{default:t(()=>[l(m,null,{default:t(()=>[l(S(E))]),_:1}),a[1]||(a[1]=n(" 返回 ",-1))]),_:1})]),e.value?(d(),y("div",j,[r("div",A,[a[2]||(a[2]=r("h2",{class:"card-title"},"订单信息",-1)),l(v,{column:2,border:""},{default:t(()=>[l(o,{label:"订单号"},{default:t(()=>[n(s(e.value.order_no),1)]),_:1}),l(o,{label:"下单时间"},{default:t(()=>[n(s(g(e.value.created_at)),1)]),_:1}),l(o,{label:"用户"},{default:t(()=>{var u;return[n(s((u=e.value.user)==null?void 0:u.username),1)]}),_:1}),l(o,{label:"订单状态"},{default:t(()=>[l(b,{type:$(e.value.status)},{default:t(()=>[n(s(D(e.value.status)),1)]),_:1},8,["type"])]),_:1}),l(o,{label:"支付方式"},{default:t(()=>[n(s(e.value.payment_method||"-"),1)]),_:1}),l(o,{label:"支付时间"},{default:t(()=>[n(s(e.value.paid_at?g(e.value.paid_at):"-"),1)]),_:1}),l(o,{label:"商品金额"},{default:t(()=>[n("¥"+s(e.value.total_amount),1)]),_:1}),e.value.shipping_fee?(d(),c(o,{key:0,label:"运费"},{default:t(()=>[r("span",{style:F({color:e.value.shipping_fee==0?"#67c23a":"#606266"})},s(e.value.shipping_fee==0?"免运费":`¥${e.value.shipping_fee}`),5)]),_:1})):p("",!0),e.value.discount_amount>0?(d(),c(o,{key:1,label:"优惠折扣"},{default:t(()=>[r("span",G,"-¥"+s(e.value.discount_amount),1)]),_:1})):p("",!0),l(o,{label:"实付金额"},{default:t(()=>[r("span",H,"¥"+s(e.value.pay_amount),1)]),_:1})]),_:1})]),r("div",Q,[a[3]||(a[3]=r("h2",{class:"card-title"},"商品信息",-1)),l(V,{data:e.value.items,style:{width:"100%"}},{default:t(()=>[l(f,{label:"商品",width:"400"},{default:t(({row:u})=>[r("div",W,[r("img",{src:O(u),alt:u.product_name,class:"product-img"},null,8,Y),r("div",J,s(u.product_name),1)])]),_:1}),l(f,{prop:"price",label:"单价",width:"120"},{default:t(({row:u})=>[n("¥"+s(u.price),1)]),_:1}),l(f,{prop:"quantity",label:"数量",width:"100"}),l(f,{label:"小计",width:"120"},{default:t(({row:u})=>[n("¥"+s((u.price*u.quantity).toFixed(2)),1)]),_:1})]),_:1},8,["data"])]),r("div",K,[a[4]||(a[4]=r("h2",{class:"card-title"},"收货信息",-1)),l(v,{column:1,border:""},{default:t(()=>[l(o,{label:"收货人"},{default:t(()=>[n(s(e.value.shipping_name),1)]),_:1}),e.value.shipping_email?(d(),c(o,{key:0,label:"邮箱"},{default:t(()=>[n(s(e.value.shipping_email),1)]),_:1})):p("",!0),l(o,{label:"联系电话"},{default:t(()=>[n(s(e.value.shipping_phone),1)]),_:1}),l(o,{label:"收货地址"},{default:t(()=>[n(s(e.value.shipping_address),1)]),_:1}),e.value.shipping_city?(d(),c(o,{key:1,label:"城市"},{default:t(()=>[n(s(e.value.shipping_city),1)]),_:1})):p("",!0),e.value.shipping_postal_code?(d(),c(o,{key:2,label:"邮政编码"},{default:t(()=>[n(s(e.value.shipping_postal_code),1)]),_:1})):p("",!0),e.value.shipping_company?(d(),c(o,{key:3,label:"物流公司"},{default:t(()=>[n(s(e.value.shipping_company),1)]),_:1})):p("",!0),e.value.shipping_no?(d(),c(o,{key:4,label:"物流单号"},{default:t(()=>[n(s(e.value.shipping_no),1)]),_:1})):p("",!0),e.value.shipped_at?(d(),c(o,{key:5,label:"发货时间"},{default:t(()=>[n(s(g(e.value.shipped_at)),1)]),_:1})):p("",!0),l(o,{label:"备注"},{default:t(()=>[n(s(e.value.remark||"无"),1)]),_:1})]),_:1})])])):(d(),y("div",L,[l(B,{rows:10,animated:""})]))])}}},ee=C(U,[["__scopeId","data-v-58b84e7e"]]);export{ee as default};
