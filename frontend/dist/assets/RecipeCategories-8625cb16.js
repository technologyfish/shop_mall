import{H as C,_ as H,r as m,J as x,o as J,b as n,ab as L,d as R,e as Q,i as t,w as l,Q as g,f as z,k as G,R as K,j as f,C as W,l as X,t as Y,P as Z}from"./index-dc0220d7.js";function ee(r){return C({url:"/api/admin/recipe-categories",method:"get",params:r})}function te(r){return C({url:"/api/admin/recipe-categories",method:"post",data:r})}function ae(r,y){return C({url:`/api/admin/recipe-categories/${r}`,method:"put",data:y})}function le(r){return C({url:`/api/admin/recipe-categories/${r}`,method:"delete"})}const oe={class:"recipe-categories-page"},ne={class:"card-header"},se={__name:"RecipeCategories",setup(r){const y=m([]),w=m(!1),V=m(!1),c=m(!1),b=m(!1),S=m(),i=x({current:1,pageSize:15,total:0}),o=x({id:null,name:"",slug:"",description:"",sort:0,status:1}),D={name:[{required:!0,message:"Please enter category name",trigger:"blur"}]},_=async()=>{w.value=!0;try{const s={page:i.current,per_page:i.pageSize},d=(await ee(s)).data.data;y.value=d.data||[],i.total=d.total||0}catch{g.error("Failed to load categories")}finally{w.value=!1}},h=()=>{b.value=!1,A(),c.value=!0},E=s=>{b.value=!0,Object.assign(o,s),c.value=!0},U=async()=>{S.value&&await S.value.validate(async s=>{var e,d;if(s){V.value=!0;try{b.value?(await ae(o.id,o),g.success("Category updated successfully")):(await te(o),g.success("Category created successfully")),c.value=!1,_()}catch(p){g.error(((d=(e=p.response)==null?void 0:e.data)==null?void 0:d.message)||"Operation failed")}finally{V.value=!1}}})},B=async s=>{try{await Z.confirm("Are you sure you want to delete this category?","Confirm",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await le(s.id),g.success("Category deleted successfully"),_()}catch(e){e!=="cancel"&&g.error("Failed to delete category")}},A=()=>{Object.assign(o,{id:null,name:"",slug:"",description:"",sort:0,status:1})};return J(()=>{_()}),(s,e)=>{const d=n("el-icon"),p=n("el-button"),u=n("el-table-column"),N=n("el-tag"),$=n("el-table"),j=n("el-pagination"),F=n("el-card"),k=n("el-input"),v=n("el-form-item"),I=n("el-input-number"),M=n("el-switch"),O=n("el-form"),P=n("el-dialog"),T=L("loading");return R(),Q("div",oe,[t(F,null,{header:l(()=>[z("div",ne,[e[10]||(e[10]=z("h2",null,"Recipe Categories",-1)),t(p,{type:"primary",onClick:h},{default:l(()=>[t(d,null,{default:l(()=>[t(G(K))]),_:1}),e[9]||(e[9]=f(" Add Category ",-1))]),_:1})])]),default:l(()=>[W((R(),X($,{data:y.value,border:""},{default:l(()=>[t(u,{prop:"id",label:"ID",width:"80"}),t(u,{prop:"name",label:"Name",width:"150"}),t(u,{prop:"slug",label:"Slug",width:"150"}),t(u,{prop:"description",label:"Description","show-overflow-tooltip":""}),t(u,{prop:"recipes_count",label:"Recipes",width:"100",align:"center"}),t(u,{prop:"sort",label:"Sort",width:"100",align:"center"}),t(u,{prop:"status",label:"Status",width:"100",align:"center"},{default:l(({row:a})=>[t(N,{type:a.status===1?"success":"danger"},{default:l(()=>[f(Y(a.status===1?"Active":"Inactive"),1)]),_:2},1032,["type"])]),_:1}),t(u,{label:"Actions",width:"180",fixed:"right"},{default:l(({row:a})=>[t(p,{link:"",type:"primary",size:"small",onClick:q=>E(a)},{default:l(()=>[...e[11]||(e[11]=[f(" Edit ",-1)])]),_:1},8,["onClick"]),t(p,{link:"",type:"danger",size:"small",onClick:q=>B(a)},{default:l(()=>[...e[12]||(e[12]=[f(" Delete ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,w.value]]),t(j,{"current-page":i.current,"onUpdate:currentPage":e[0]||(e[0]=a=>i.current=a),"page-size":i.pageSize,"onUpdate:pageSize":e[1]||(e[1]=a=>i.pageSize=a),"page-sizes":[10,20,50,100],total:i.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:_,onCurrentChange:_,class:"pagination"},null,8,["current-page","page-size","total"])]),_:1}),t(P,{modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=a=>c.value=a),title:b.value?"Edit Category":"Add Category",width:"600px"},{footer:l(()=>[t(p,{onClick:e[7]||(e[7]=a=>c.value=!1)},{default:l(()=>[...e[13]||(e[13]=[f("Cancel",-1)])]),_:1}),t(p,{type:"primary",onClick:U,loading:V.value},{default:l(()=>[...e[14]||(e[14]=[f(" Save ",-1)])]),_:1},8,["loading"])]),default:l(()=>[t(O,{model:o,rules:D,ref_key:"formRef",ref:S,"label-width":"120px"},{default:l(()=>[t(v,{label:"Name",prop:"name"},{default:l(()=>[t(k,{modelValue:o.name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.name=a),placeholder:"Enter category name"},null,8,["modelValue"])]),_:1}),t(v,{label:"Slug",prop:"slug"},{default:l(()=>[t(k,{modelValue:o.slug,"onUpdate:modelValue":e[3]||(e[3]=a=>o.slug=a),placeholder:"URL slug (auto-generated if empty)"},null,8,["modelValue"])]),_:1}),t(v,{label:"Description"},{default:l(()=>[t(k,{modelValue:o.description,"onUpdate:modelValue":e[4]||(e[4]=a=>o.description=a),type:"textarea",rows:3,placeholder:"Enter description"},null,8,["modelValue"])]),_:1}),t(v,{label:"Sort"},{default:l(()=>[t(I,{modelValue:o.sort,"onUpdate:modelValue":e[5]||(e[5]=a=>o.sort=a),min:0},null,8,["modelValue"])]),_:1}),t(v,{label:"Status"},{default:l(()=>[t(M,{modelValue:o.status,"onUpdate:modelValue":e[6]||(e[6]=a=>o.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ie=H(se,[["__scopeId","data-v-10512a70"]]);export{ie as default};
