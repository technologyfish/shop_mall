import{g as b,u as k}from"./contact-6118f72a.js";import{_ as C,r as c,o as x,b as d,ab as I,d as v,e as w,i as o,w as t,Q as p,f,C as B,l as E,j as N}from"./index-dc0220d7.js";const U={class:"contact-info-page"},A={__name:"ContactInfo",setup(D){const a=c({email:"",phone:"",address:""}),u=c(!1),i=c(!1),m=async()=>{u.value=!0;try{const e=(await b()).data.data;Array.isArray(e)?e.forEach(l=>{l.key==="email"&&(a.value.email=l.value),l.key==="phone"&&(a.value.phone=l.value),l.key==="address"&&(a.value.address=l.value)}):(e.email&&(a.value.email=e.email.value),e.phone&&(a.value.phone=e.phone.value),e.address&&(a.value.address=e.address.value))}catch{p.error("获取联系信息失败")}finally{u.value=!1}},_=async()=>{var s,e;i.value=!0;try{const l=[{key:"email",value:a.value.email,label:"Email",type:"email",sort:1},{key:"phone",value:a.value.phone,label:"Phone",type:"text",sort:2},{key:"address",value:a.value.address,label:"Location",type:"text",sort:3}];await k({items:l}),p.success("保存成功")}catch(l){p.error(((e=(s=l.response)==null?void 0:s.data)==null?void 0:e.message)||"保存失败")}finally{i.value=!1}};return x(()=>{m()}),(s,e)=>{const l=d("el-input"),r=d("el-form-item"),y=d("el-button"),h=d("el-form"),g=d("el-card"),V=I("loading");return v(),w("div",U,[o(g,null,{header:t(()=>[...e[3]||(e[3]=[f("div",{class:"card-header"},[f("h2",null,"联系信息管理")],-1)])]),default:t(()=>[B((v(),E(h,{model:a.value,"label-width":"120px"},{default:t(()=>[o(r,{label:"邮箱地址"},{default:t(()=>[o(l,{modelValue:a.value.email,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.email=n),placeholder:"请输入邮箱地址"},null,8,["modelValue"])]),_:1}),o(r,{label:"联系电话"},{default:t(()=>[o(l,{modelValue:a.value.phone,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.phone=n),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),o(r,{label:"地址位置"},{default:t(()=>[o(l,{modelValue:a.value.address,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.address=n),placeholder:"请输入地址位置"},null,8,["modelValue"])]),_:1}),o(r,null,{default:t(()=>[o(y,{type:"primary",onClick:_,loading:i.value},{default:t(()=>[...e[4]||(e[4]=[N(" 保存 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])),[[V,u.value]])]),_:1})])}}},L=C(A,[["__scopeId","data-v-6e987a1a"]]);export{L as default};
