import{_ as D,u as T,r as M,o as N,K as v,b as p,d as r,e as l,f as s,F as V,g as F,l as g,w as c,t as a,i as _,j as d,h as P,P as $}from"./index-dc0220d7.js";import{a as q,b as A}from"./subscription-81e7f525.js";const E={class:"my-subscriptions-page"},I={key:0,class:"subscriptions-list"},L={class:"card-header"},U={class:"plan-info"},j={class:"price-info"},z={class:"price"},K={class:"period"},R={class:"card-body"},Y={class:"info-row"},G={class:"value"},H={class:"info-row"},J={class:"value"},O={class:"card-footer"},Q={__name:"MySubscriptions",setup(W){const y=T(),u=M([]);N(()=>{m()});const m=async()=>{try{const t=await q();u.value=t.data.data||[]}catch{v.error("Failed to load subscriptions")}},h=t=>({active:"success",paused:"warning",cancelled:"info",past_due:"danger"})[t]||"info",b=t=>({active:"Active",paused:"Paused",cancelled:"Cancelled",past_due:"Past Due"})[t]||t,C=t=>({monthly:"month",quarterly:"quarter",yearly:"year"})[t]||"month",f=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",w=async t=>{var e,i;try{await $.confirm("Are you sure you want to cancel this subscription? This action cannot be undone.","Confirm Cancellation",{type:"warning",confirmButtonText:"Yes, Cancel It"}),await A(t),m()}catch(n){n!=="cancel"&&v.error(((i=(e=n.response)==null?void 0:e.data)==null?void 0:i.message)||"Failed to cancel subscription")}},S=t=>{y.push(`/user-center/subscriptions/${t}`)},k=()=>{y.push("/subscription")};return(t,e)=>{const i=p("el-tag"),n=p("el-button"),x=p("el-empty");return r(),l("div",E,[e[5]||(e[5]=s("h2",{class:"page-title"},"My Subscriptions",-1)),u.value.length?(r(),l("div",I,[(r(!0),l(V,null,F(u.value,o=>(r(),l("div",{key:o.id,class:"subscription-card"},[s("div",L,[s("div",U,[s("h3",null,a(o.plan_name),1),_(i,{type:h(o.status),size:"large"},{default:c(()=>[d(a(b(o.status)),1)]),_:2},1032,["type"])]),s("div",j,[s("span",z,"$"+a(o.price),1),s("span",K,"/"+a(C(o.plan_type)),1)])]),s("div",R,[s("div",Y,[e[0]||(e[0]=s("span",{class:"label"},"Bottles per delivery:",-1)),s("span",G,a(o.bottles_per_delivery),1)]),s("div",H,[e[1]||(e[1]=s("span",{class:"label"},"Current period:",-1)),s("span",J,a(f(o.current_period_start))+" - "+a(f(o.current_period_end)),1)])]),s("div",O,[o.status==="active"?(r(),g(n,{key:0,type:"danger",onClick:B=>w(o.id)},{default:c(()=>[...e[2]||(e[2]=[d(" Cancel ",-1)])]),_:1},8,["onClick"])):P("",!0),_(n,{onClick:B=>S(o.id)},{default:c(()=>[...e[3]||(e[3]=[d(" View Details ",-1)])]),_:1},8,["onClick"])])]))),128))])):(r(),g(x,{key:1,description:"No subscriptions yet"},{default:c(()=>[_(n,{type:"primary",onClick:k},{default:c(()=>[...e[4]||(e[4]=[d("Subscribe Now",-1)])]),_:1})]),_:1}))])}}},ee=D(Q,[["__scopeId","data-v-c25f1d62"]]);export{ee as default};
