import{_ as w,u as z,I as V,r as v,o as x,b,d as u,e as c,f as e,i as o,w as n,t as p,j as i,h as N,k as f,L as B,M as P,N as T}from"./index-dc0220d7.js";import{v as I}from"./subscription-81e7f525.js";const h={class:"success-page"},D={class:"container"},F={key:0,class:"success-card"},H={class:"loading-icon"},M={key:1,class:"success-card error-card"},R={class:"error-icon"},j={class:"message"},q={class:"actions"},A={key:2,class:"success-card"},E={class:"success-icon"},L={key:0,class:"details"},Y={class:"actions"},$={__name:"SubscriptionSuccess",setup(G){const y=z(),S=V(),a=v(null),d=v(!0),r=v(null);x(()=>{m()});const m=async()=>{var s,l;const _=S.query.session_id;if(!_){r.value="No session ID found",d.value=!1;return}try{d.value=!0,r.value=null;const t=await I(_);a.value=t.data.data}catch(t){console.error("Verification failed:",t),r.value=((l=(s=t.response)==null?void 0:s.data)==null?void 0:l.message)||"Failed to verify subscription"}finally{d.value=!1}},k=()=>{m()},C=()=>{y.push("/user-center/subscriptions")},g=()=>{y.push("/")};return(_,s)=>{const l=b("el-icon"),t=b("el-button");return u(),c("div",h,[e("div",D,[d.value?(u(),c("div",F,[e("div",H,[o(l,{size:60,class:"is-loading"},{default:n(()=>[o(f(B))]),_:1})]),s[0]||(s[0]=e("h1",null,"Processing...",-1)),s[1]||(s[1]=e("p",{class:"message"},"Please wait while we verify your subscription.",-1))])):r.value?(u(),c("div",M,[e("div",R,[o(l,{size:100,color:"#F56C6C"},{default:n(()=>[o(f(P))]),_:1})]),s[4]||(s[4]=e("h1",null,"Something went wrong",-1)),e("p",j,p(r.value),1),e("div",q,[o(t,{type:"primary",size:"large",onClick:k},{default:n(()=>[...s[2]||(s[2]=[i(" Retry ",-1)])]),_:1}),o(t,{size:"large",onClick:g},{default:n(()=>[...s[3]||(s[3]=[i(" Back to Home ",-1)])]),_:1})])])):(u(),c("div",A,[e("div",E,[o(l,{size:100,color:"#4CAF50"},{default:n(()=>[o(f(T))]),_:1})]),s[11]||(s[11]=e("h1",null,"Subscription Successful!",-1)),s[12]||(s[12]=e("p",{class:"message"}," Thank you for joining The Sauce Club! Your subscription has been activated. ",-1)),a.value?(u(),c("div",L,[s[8]||(s[8]=e("h3",null,"Subscription Details",-1)),e("p",null,[s[5]||(s[5]=e("strong",null,"Plan:",-1)),i(" "+p(a.value.plan_name),1)]),e("p",null,[s[6]||(s[6]=e("strong",null,"Price:",-1)),i(" $"+p(a.value.price)+"/month",1)]),e("p",null,[s[7]||(s[7]=e("strong",null,"Status:",-1)),i(" "+p(a.value.status),1)])])):N("",!0),e("div",Y,[o(t,{type:"primary",size:"large",onClick:C},{default:n(()=>[...s[9]||(s[9]=[i(" View My Subscriptions ",-1)])]),_:1}),o(t,{size:"large",onClick:g},{default:n(()=>[...s[10]||(s[10]=[i(" Back to Home ",-1)])]),_:1})])]))])])}}},O=w($,[["__scopeId","data-v-3d01d1ae"]]);export{O as default};
