import{_ as I,r as g,J as M,o as O,b as r,d as n,e as i,f as o,i as s,w as a,F as z,g as J,l as x,h as c,k as w,R as K,j as v,t as y,X as L,a6 as X,K as p,P as G}from"./index-dc0220d7.js";import{g as H,u as Q,a as W,s as Y,d as Z}from"./address-33c3bea3.js";const ee={class:"addresses-page"},le={class:"page-header-row"},se={class:"address-grid"},te={class:"card-header"},ae={class:"name-section"},oe={class:"actions"},de={class:"card-body"},ne={class:"info-row"},re={class:"value"},ie={key:0,class:"info-row"},ue={class:"value"},ce={class:"info-row"},pe={class:"value"},me={key:1,class:"info-row"},_e={class:"value"},fe={key:0},ye={key:1},ge={key:0,class:"card-footer"},ve={__name:"Addresses",setup(Ve){const k=g([]),m=g(!1),V=g(!1),h=g(!1),C=g(),t=M({id:null,name:"",email:"",phone:"",address:"",city:"",postal_code:"",is_default:!1}),N={name:[{required:!0,message:"Please enter Full Name",trigger:"blur"}],email:[{required:!0,message:"Please enter Email",trigger:"blur"},{type:"email",message:"Invalid email format",trigger:"blur"}],phone:[{required:!0,message:"Please enter Phone",trigger:"blur"}],address:[{required:!0,message:"Please enter Shipping Address",trigger:"blur"}],city:[{required:!0,message:"Please enter City",trigger:"blur"}],postal_code:[{required:!0,message:"Please enter Postal Code",trigger:"blur"}]};O(()=>{b()});const b=async()=>{try{const d=await H();k.value=d.data.data||[]}catch(d){console.error(d)}},D=()=>{V.value=!1,B(),m.value=!0},E=d=>{V.value=!0,Object.assign(t,d),m.value=!0},F=async()=>{await C.value.validate(async d=>{if(d){h.value=!0;try{V.value?(await Q(t.id,t),p.success("Address updated successfully")):(await W(t),p.success("Address added successfully")),m.value=!1,b()}catch(e){p.error(e.message||"Failed to save address")}finally{h.value=!1}}})},S=async d=>{try{await Y(d),p.success("Default address updated"),b()}catch(e){p.error(e.message||"Failed to set default address")}},U=async d=>{try{await G.confirm("Are you sure you want to delete this address?","Confirm",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}),await Z(d),p.success("Address deleted successfully"),b()}catch(e){e!=="cancel"&&p.error(e.message||"Failed to delete address")}},B=()=>{Object.assign(t,{id:null,name:"",email:"",phone:"",address:"",city:"",postal_code:"",is_default:!1})};return(d,e)=>{const A=r("el-icon"),_=r("el-button"),q=r("el-tag"),$=r("el-empty"),f=r("el-input"),u=r("el-form-item"),j=r("el-switch"),R=r("el-form"),T=r("el-dialog");return n(),i("div",ee,[o("div",le,[s(_,{type:"primary",onClick:D,class:"btn-add"},{default:a(()=>[s(A,null,{default:a(()=>[s(w(K))]),_:1}),e[9]||(e[9]=v(" Add New Address ",-1))]),_:1})]),o("div",se,[(n(!0),i(z,null,J(k.value,l=>(n(),i("div",{key:l.id,class:"address-card"},[o("div",te,[o("div",ae,[o("h3",null,y(l.name),1),l.is_default?(n(),x(q,{key:0,type:"success",size:"small"},{default:a(()=>[...e[10]||(e[10]=[v("Default",-1)])]),_:1})):c("",!0)]),o("div",oe,[s(_,{link:"",type:"primary",onClick:P=>E(l)},{default:a(()=>[s(A,null,{default:a(()=>[s(w(L))]),_:1})]),_:1},8,["onClick"]),s(_,{link:"",type:"danger",onClick:P=>U(l.id)},{default:a(()=>[s(A,null,{default:a(()=>[s(w(X))]),_:1})]),_:1},8,["onClick"])])]),o("div",de,[o("div",ne,[e[11]||(e[11]=o("span",{class:"label"},"Phone:",-1)),o("span",re,y(l.phone),1)]),l.email?(n(),i("div",ie,[e[12]||(e[12]=o("span",{class:"label"},"Email:",-1)),o("span",ue,y(l.email),1)])):c("",!0),o("div",ce,[e[13]||(e[13]=o("span",{class:"label"},"Address:",-1)),o("span",pe,y(l.address),1)]),l.city||l.postal_code?(n(),i("div",me,[e[14]||(e[14]=o("span",{class:"label"},"City/Postal:",-1)),o("span",_e,[l.city?(n(),i("span",fe,y(l.city),1)):c("",!0),l.postal_code?(n(),i("span",ye,y(l.postal_code),1)):c("",!0)])])):c("",!0)]),l.is_default?c("",!0):(n(),i("div",ge,[s(_,{link:"",onClick:P=>S(l.id)},{default:a(()=>[...e[15]||(e[15]=[v(" Set as Default ",-1)])]),_:1},8,["onClick"])]))]))),128))]),k.value.length?c("",!0):(n(),x($,{key:0,description:"No addresses yet. Add one to get started!"})),s(T,{modelValue:m.value,"onUpdate:modelValue":e[8]||(e[8]=l=>m.value=l),title:V.value?"Edit Address":"Add New Address",width:"500px"},{footer:a(()=>[s(_,{onClick:e[7]||(e[7]=l=>m.value=!1)},{default:a(()=>[...e[16]||(e[16]=[v("Cancel",-1)])]),_:1}),s(_,{type:"primary",onClick:F,loading:h.value},{default:a(()=>[...e[17]||(e[17]=[v("Save",-1)])]),_:1},8,["loading"])]),default:a(()=>[s(R,{model:t,rules:N,ref_key:"formRef",ref:C,"label-width":"140px"},{default:a(()=>[s(u,{label:"Full Name",prop:"name"},{default:a(()=>[s(f,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.name=l),placeholder:"Full Name"},null,8,["modelValue"])]),_:1}),s(u,{label:"Email",prop:"email"},{default:a(()=>[s(f,{modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=l=>t.email=l),placeholder:"Email",type:"email"},null,8,["modelValue"])]),_:1}),s(u,{label:"Phone",prop:"phone"},{default:a(()=>[s(f,{modelValue:t.phone,"onUpdate:modelValue":e[2]||(e[2]=l=>t.phone=l),placeholder:"Phone"},null,8,["modelValue"])]),_:1}),s(u,{label:"Shipping Address",prop:"address"},{default:a(()=>[s(f,{modelValue:t.address,"onUpdate:modelValue":e[3]||(e[3]=l=>t.address=l),type:"textarea",rows:3,placeholder:"Shipping Address"},null,8,["modelValue"])]),_:1}),s(u,{label:"City",prop:"city"},{default:a(()=>[s(f,{modelValue:t.city,"onUpdate:modelValue":e[4]||(e[4]=l=>t.city=l),placeholder:"City"},null,8,["modelValue"])]),_:1}),s(u,{label:"Postal Code",prop:"postal_code"},{default:a(()=>[s(f,{modelValue:t.postal_code,"onUpdate:modelValue":e[5]||(e[5]=l=>t.postal_code=l),placeholder:"Postal Code"},null,8,["modelValue"])]),_:1}),s(u,{label:"Set as Default"},{default:a(()=>[s(j,{modelValue:t.is_default,"onUpdate:modelValue":e[6]||(e[6]=l=>t.is_default=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},he=I(ve,[["__scopeId","data-v-28f0226d"]]);export{he as default};
