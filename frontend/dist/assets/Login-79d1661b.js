import{u as _,a as b,r as m,b as w,d as y,e as x,f as s,A as k,C as i,D as p,a8 as h,i as g,w as c,t as B,j as u,P as L,K as S}from"./index-dc0220d7.js";const U={class:"login-page"},V={class:"login-container"},C={class:"login-card"},E={class:"form-group"},T={class:"form-group"},D={class:"forgot-password"},M={class:"remember-me"},N=["disabled"],q={class:"register-link"},P={__name:"Login",setup(A){const d=_(),v=b(),t=m({username:"",password:"",remember:!1}),r=m(!1),f=async()=>{var l,e,n;if(!r.value){r.value=!0;try{await v.login(t.value),d.push("/")}catch(o){const a=o.response;(a==null?void 0:a.status)===404||((l=a==null?void 0:a.data)==null?void 0:l.error_type)==="user_not_found"?L.confirm("This account does not exist. Would you like to create a new account?","Account Not Found",{confirmButtonText:"Sign Up",cancelButtonText:"Cancel",type:"warning"}).then(()=>{d.push("/register")}).catch(()=>{}):S.error(((n=(e=o.response)==null?void 0:e.data)==null?void 0:n.message)||o.message||"Login failed")}finally{r.value=!1}}};return(l,e)=>{const n=w("router-link");return y(),x("div",U,[s("div",V,[s("div",C,[s("form",{class:"login-form",onSubmit:k(f,["prevent"])},[s("div",E,[e[3]||(e[3]=s("label",null,"Username or Email",-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.username=o),type:"text",placeholder:"Enter your username or email",required:""},null,512),[[p,t.value.username]])]),s("div",T,[e[4]||(e[4]=s("label",null,"Password",-1)),i(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.password=o),type:"password",placeholder:"Enter your password",required:""},null,512),[[p,t.value.password]])]),s("div",D,[s("label",M,[i(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>t.value.remember=o)},null,512),[[h,t.value.remember]]),e[5]||(e[5]=s("span",null,"Remember me",-1))]),g(n,{to:"/forgot-password",class:"forgot-link"},{default:c(()=>[...e[6]||(e[6]=[u(" Forgot password? ",-1)])]),_:1})]),s("button",{type:"submit",class:"btn-submit",disabled:r.value},B(r.value?"Logging in...":"Log In"),9,N),s("div",q,[e[8]||(e[8]=u(" Don't have an account? ",-1)),g(n,{to:"/register"},{default:c(()=>[...e[7]||(e[7]=[u("Sign up",-1)])]),_:1})])],32)])])])}}};export{P as default};
